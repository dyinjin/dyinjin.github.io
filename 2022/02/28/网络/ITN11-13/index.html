<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":250,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":false,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="IPv4编址地址结构IPv4 地址为32位分层地址，由网络部分和主机部分两个部分组成。IPv4 地址 - 这是主机的唯一 IPv4 地址。子网掩码 - 用于标识 IPv4 地址的网络部分&#x2F;主机部分。    IPv4 主机地址 (例192.168.10.10) -主机的 IPv4 地址，采用点分十进制和二进制格式。除了根据掩码的主机位全0位（这将是网络地址）或全1位（这将是广播地址）之外，主机地址在">
<meta property="og:type" content="article">
<meta property="og:title" content="ITN 11-13">
<meta property="og:url" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/index.html">
<meta property="og:site_name" content="岛屿尽">
<meta property="og:description" content="IPv4编址地址结构IPv4 地址为32位分层地址，由网络部分和主机部分两个部分组成。IPv4 地址 - 这是主机的唯一 IPv4 地址。子网掩码 - 用于标识 IPv4 地址的网络部分&#x2F;主机部分。    IPv4 主机地址 (例192.168.10.10) -主机的 IPv4 地址，采用点分十进制和二进制格式。除了根据掩码的主机位全0位（这将是网络地址）或全1位（这将是广播地址）之外，主机地址在">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645543803092.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645547232646.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645606597498.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645609454686.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645702011889.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645702026814.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645702073373.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645702541865.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645703120047.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645704177487.png">
<meta property="og:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645704992473.png">
<meta property="article:published_time" content="2022-02-28T08:54:56.859Z">
<meta property="article:modified_time" content="2022-02-28T08:56:25.478Z">
<meta property="article:author" content="dyinjin">
<meta property="article:tag" content="网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645543803092.png">

<link rel="canonical" href="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<link rel="stylesheet" type="text/css" href="/css/injector/main.css" /><link rel="preload" as="style" href="/css/injector/light.css" /><link rel="preload" as="style" href="/css/injector/dark.css" />
  <title>ITN 11-13 | 岛屿尽</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">岛屿尽</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">dyingjin</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-cube fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-bookmark fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-cubes fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-server fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="dyinjin">
      <meta itemprop="description" content="摸鱼窝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="岛屿尽">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ITN 11-13
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-02-28 16:54:56 / 修改时间：16:56:25" itemprop="dateCreated datePublished" datetime="2022-02-28T16:54:56+08:00">2022-02-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="IPv4编址"><a href="#IPv4编址" class="headerlink" title="IPv4编址"></a>IPv4编址</h1><h2 id="地址结构"><a href="#地址结构" class="headerlink" title="地址结构"></a>地址结构</h2><p>IPv4 地址为32位分层地址，由网络部分和主机部分两个部分组成。<br>IPv4 地址 - 这是主机的唯一 IPv4 地址。<br>子网掩码 - 用于标识 IPv4 地址的网络部分/主机部分。</p>
<ul>
<li>  <strong>IPv4 主机地址 (例192.168.10.10)</strong> -主机的 IPv4 地址，采用点分十进制和二进制格式。除了根据掩码的主机位全0位（这将是网络地址）或全1位（这将是广播地址）之外，主机地址在主机部分可以有任何位的组合。<strong>注</strong>IPv4 将 <strong>224.0.0.0 到 239.255.255.255</strong> 的地址保留为组播范围（不可作为主机地址）。</li>
<li>  <strong>子网掩码 (例255.255.255.0)</strong> -主机的子网掩码，采用点分十进制和二进制格式。</li>
<li>  <strong>网络地址 (例192.168.10.0)</strong> -IPv4地址和子网掩码之间的逻辑AND运算产生一个点分十进制和二进制格式的IPv4网络地址。<br>例中，主机地址 192.168.10.10 与子网掩码 255.255.255.0 (/24) 之间的 AND运算会产生 IPv4 网络地址为192.168.10.0/24。<br>子网掩码与IP地址相结合用于确定设备属于哪个子网</li>
</ul>
<h2 id="IPv4-单播、广播和组播"><a href="#IPv4-单播、广播和组播" class="headerlink" title="IPv4 单播、广播和组播"></a>IPv4 单播、广播和组播</h2><h3 id="单播"><a href="#单播" class="headerlink" title="单播"></a>单播</h3><p>单播传输是指在一对一通信中，一个设备向另一个设备发送消息。<br>IPv4 单播主机地址的地址范围是 1.1.1.1到 223.255.255.255。不过，此范围中的很多地址被留作特殊用途。这些特殊用途的地址将在本模块后续部分讨论。</p>
<h3 id="广播"><a href="#广播" class="headerlink" title="广播"></a>广播</h3><p>广播播传输是指设备在一对多通信中，向网络上的所有设备发送消息。<br>广播数据包以32个1位或主机部分全部为 1 的地址作为目的 IP地址。<br>除了 255.255.255.255 的广播地址外，每个网络还有一个广播 IPv4 地址。这个地址称为定向广播，它使用网络范围内的最大地址，即所有主机位全部为 1 的地址。例如，网络192.168.1.0/24的定向广播地址是192.168.1.255。</p>
<h3 id="组播"><a href="#组播" class="headerlink" title="组播"></a>组播</h3><p>主机通过组播传输可以向所属组播组中的选定主机组发送一个数据包，从而减少了流量。<br>组播数据包是一个目的IP地址为组播地址的数据包。IPv4 将 <strong>224.0.0.0 到 239.255.255.255</strong> 的地址保留为组播范围。<br>接收特定组播数据包的主机称为组播客户端。组播客户端使用客户端程序请求的服务来加入组播组。<br>每个组播组由一个 IPv4 组播目的地址代表。当 IPv4 主机加入组播组后，该主机既要处理目的地址为此组播地址的数据包，也要处理发往其唯一单播地址的数据包。</p>
<h2 id="IPv4-地址的分类"><a href="#IPv4-地址的分类" class="headerlink" title="IPv4 地址的分类"></a>IPv4 地址的分类</h2><p>公有 IPv4 地址是能在 ISP（互联网运营商）路由器之间全局路由的地址。但是，并非所有可用的 IPv4 地址都可用于互联网。大多数组织使用称为私有地址的地址块向内部主机分配 IPv4 地址。<br>由于 IPv4 地址空间耗尽，引入了私有 IPv4 地址。私有 IPv4 地址并不是唯一的，可以在任何网络内部使用它。<br>| <strong>网络地址和前缀</strong> | <strong>RFC 1918 私有地址范围</strong> |<br>| — | — |<br>| 10.0.0.0/8 | 10.0.0.0 - 10.255.255.255 |<br>| 172.16.0.0/12 | 172.16.0.0 - 172.31.255.255 |<br>| 192.168.0.0/16 | 192.168.0.0 - 192.168.255.255 |</p>
<h2 id="私有-IPv4-地址和网络地址转换-NAT"><a href="#私有-IPv4-地址和网络地址转换-NAT" class="headerlink" title="私有 IPv4 地址和网络地址转换 (NAT)"></a>私有 IPv4 地址和网络地址转换 (NAT)</h2><p>在 ISP（Internet Service Provider 互联网服务提供商）可以转发此数据包之前，它必须使用网络地址转换 (NAT) 将源 IPv4 地址（即私有地址）转换为公有 IPv4 地址。NAT用于转换私有和公有 IPv4 地址。这通常是在将内部网络连接到 ISP 网络的路由器上完成。在路由到互联网之前，组织内部网中的私有 IPv4 地址将被转换为公有 IPv4 地址。</p>
<h2 id="专用-IPv4-地址"><a href="#专用-IPv4-地址" class="headerlink" title="专用 IPv4 地址"></a>专用 IPv4 地址</h2><p>一些地址，比如网络地址和广播地址不能分配给主机。还有些特殊地址可以分配给主机，但这些主机在网络内的交互方式却受到限制。</p>
<h3 id="环回地址"><a href="#环回地址" class="headerlink" title="环回地址"></a>环回地址</h3><p>环回地址（127.0.0.0 /8 或 127.0.0.1 到 127.255.255.254）通常仅被标识为127.0.0.1，主机使用这些特殊地址将流量指向其自身。</p>
<h3 id="本地链路地址"><a href="#本地链路地址" class="headerlink" title="本地链路地址"></a>本地链路地址</h3><p>本地链路地址（169.254.0.0 /16 或 169.254.0.1 至 169.254.255.254）通常称为自动私有 IP 编址 (APIPA) 地址或自分配地址。 当没有可用的DHCP服务器时，Windows DHCP客户端使用它们进行自我配置。本地链路地址可以用于点对点连接，但通常不用于此目的。</p>
<h3 id="IP-地址的分配"><a href="#IP-地址的分配" class="headerlink" title="IP 地址的分配"></a>IP 地址的分配</h3><p>IPv4 和 IPv6 地址是通过互联网编号指派机构 (IANA) 管理的。IANA 管理并向地区性互联网注册机构 (RIR) 分配 IP 地址块。</p>
<ul>
<li>  <strong>AfriNIC</strong> (非洲网络信息中心) - 非洲地区</li>
<li>  <strong>APNIC</strong> (亚太网络信息中心) - 亚太地区</li>
<li>  <strong>ARIN</strong> (美洲互联网号码注册管理机构) - 北美地区</li>
<li>  <strong>LACNIC</strong> (拉丁美洲及加勒比互联网地址注册管理机构) - 拉丁美洲和部分加勒比海岛屿</li>
<li>  <strong>RIPE NCC</strong> (欧洲 IP 地址注册中心) - 欧洲、中东和中亚<br>RIR 的职责是向 ISP 分配 IP 地址，而 ISP 将向组织和更小的 ISP 提供 IPv4 地址块。根据 RIR 的政策规定，组织也可直接从 RIR 获取地址。</li>
</ul>
<h2 id="网络分段"><a href="#网络分段" class="headerlink" title="网络分段"></a>网络分段</h2><h3 id="广播域和分段"><a href="#广播域和分段" class="headerlink" title="广播域和分段"></a>广播域和分段</h3><p>在以太网局域网中，设备使用广播和地址解析协议 (ARP) 来定位其他设备。地址解析协议 (ARP)将第 2 层广播发送到本地网络上的已知 IPv4 地址，以发现相关 MAC 地址。以太网局域网上的设备还可以使用服务定位其他设备。主机通常需要使用动态主机配置协议 (DHCP) 来获取 IPv4 地址配置，这会发送本地网络上的广播来定位 DHCP 服务器。<br>交换机会将广播传播到所有接口，接收它的接口除外。<br>路由器不传播广播。<br>因此，每个路由器接口都连接了一个广播域，而广播只能在特定广播域内传播。</p>
<h3 id="大型广播域存在的问题与子网划分"><a href="#大型广播域存在的问题与子网划分" class="headerlink" title="大型广播域存在的问题与子网划分"></a>大型广播域存在的问题与子网划分</h3><p>大型广播域是连接很多主机的网络。大型广播域的一个问题是这些主机会生成太多广播，这会对网络造成不良影响。在图中，局域网1 连接了 400 个用户，可能会产生过量的广播流量。这会导致<strong>网络操作速度缓慢</strong>，因为它会导致大量的流量，而<strong>设备操作变慢</strong>是因为设备必须接受和处理每个广播数据包。</p>
<p>解决方案是使用称为<strong>子网划分</strong>的过程缩减网络的规模以创建更小的广播域。这些较小的网络空间通常称为“子网”。<br>子网划分可以降低整体网络流量并改善网络性能。它也能让管理员实施安全策略，例如哪些子网允许或不允许进行通信。另一个原因是，它减少了由于错误配置、硬件/软件问题或恶意意图而受到异常广播流量影响的设备数量。</p>
<h3 id="IPv4-网络的子网"><a href="#IPv4-网络的子网" class="headerlink" title="IPv4 网络的子网"></a>IPv4 网络的子网</h3><p>创建 IPv4 子网时会将一个或多个主机位作为网络位。具体做法是延长子网掩码，从地址的主机部分借用若干位来增加网络位。借用的主机位越多，可以定义的子网也就越多。为了增加子网数量而借用的位越多，每个子网的主机数量就越少。</p>
<h2 id="VLSM-Variable-Length-Subnetwork-Mask-可变长子网掩码"><a href="#VLSM-Variable-Length-Subnetwork-Mask-可变长子网掩码" class="headerlink" title="VLSM(Variable Length Subnetwork Mask 可变长子网掩码)"></a>VLSM(Variable Length Subnetwork Mask 可变长子网掩码)</h2><p>并不是您创建的每个子网都需要这么多主机，这会导致许多IPv4地址未被使用。也许您需要一个包含更多主机的子网。这就是开发可变长子网掩码 (VLSM) 的原因。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645543803092.png"><br>所有子网都使用相同的子网掩码。这意味着每个子网有相同数量的可用主机地址。如图左边所示，传统子网划分可以创建大小相等的子网。传统方案中每个子网都使用相同的子网掩码。如图右边所示，VLSM 使网络空间能够分为大小不等的部分。使用 VLSM，子网掩码将根据特定子网所借用的位数而变化，从而成为 VLSM 的“变量”部分。<br>使用 VLSM 子网，可以为 LAN 和路由器之间网段提供地址，而不产生不必要浪费。</p>
<h2 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h2><p><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645547232646.png"><br>n=子网掩码-网络掩码<br>2^n=子网数<br>2^(32-网络掩码-n)-2=主机数<br>子网数*(主机数+2)=2^(32-网络掩码)<br>例：<br>网络管理员将 192.168.10.0/24 网络划分成带 /26 子网掩码的子网。会创建4个相同大小的子网，每个子网可有62台主机<br>2=子网掩码-网络掩码=26-24<br>2^2=子网数=4<br>2^(32-网络掩码-n)-2=2^(8-2)-2=主机数=62<br>子网数*(主机数+2)=4*(62+2)=2^(32-网络掩码)=2^(32-24)</p>
<p>减二因为最低位(后面全是0)用于表示主机号，最高位(后面全是1)用于表示广播地址</p>
<p>DMZ：Demilitarized Zone 隔离区</p>
<h1 id="IPv6编址"><a href="#IPv6编址" class="headerlink" title="IPv6编址"></a>IPv6编址</h1><p>IPv6 旨在接替 IPv4。IPv6 拥有更大的 128 位地址空间，提供 340 涧（即，340后面有36个0）个不确定地址。IETF 已经创建了各种协议和工具来协助网络管理员将网络迁移到 IPv6。迁移技术可分为三类：</p>
<ul>
<li><strong>双堆栈</strong>-双堆栈允许 IPv4 和 IPv6 在同一网段上共存。双堆栈设备同时运行 IPv4 和 IPv6 协议栈。称为原生 IPv6</li>
<li><strong>隧道</strong>-隧道是一种通过 IPv4 网络传输 IPv6 数据包的方法。</li>
<li><strong>转换</strong>-网络地址转换 64 (NAT64) 允许支持 IPv6 的设备与支持 IPv4 的设备使用类似于 IPv4 中 NAT 的转换技术进行通信。IPv6 数据包被转换为 IPv4 数据包，IPv4 数据包被转换为 IPv6 数据包。</li>
</ul>
<h2 id="IPv6-地址表示方法"><a href="#IPv6-地址表示方法" class="headerlink" title="IPv6 地址表示方法"></a>IPv6 地址表示方法</h2><p>书写 IPv6 地址的首选格式为 x:x:x:x:x:x:x:x，每个“x”均包括四个十六进制值。</p>
<ul>
<li>第一条有助于缩短 IPv6 地址记法的规则是省略十六进制数中的所有前导 0（零）</li>
<li>第二条有助于缩短 IPv6 地址记法的规则是使用双冒号 (::) 替换任何由<strong>一个或多个</strong>全由 0 组成的16 位十六进制数组成的<strong>连续</strong>字符串</li>
<li>双冒号 (::) 仅可在每个地址中<strong>使用一次</strong>，否则可能会得出一个以上的地址。</li>
</ul>
<h2 id="IPv6-地址类型"><a href="#IPv6-地址类型" class="headerlink" title="IPv6 地址类型"></a>IPv6 地址类型</h2><h3 id="IPv6-地址三大类"><a href="#IPv6-地址三大类" class="headerlink" title="IPv6 地址三大类"></a>IPv6 地址三大类</h3><ul>
<li>  <strong>单播</strong> - IPv6 单播地址用于唯一标识支持 IPv6 的设备上的接口。</li>
<li>  <strong>组播</strong> - IPv6 组播地址用于将单个 IPv6 数据包发送到多个目的地。</li>
<li>  <strong>任播</strong> -IPv6 任播地址是可分配到多个设备的 IPv6 任播地址。发送至任播地址的数据包会被路由到最近的拥有该地址的设备。<br>与 IPv4 不同，IPv6 没有广播地址。但是，IPv6 具有 IPv6 全节点组播地址，这在本质上与广播地址的效果相同。</li>
</ul>
<h3 id="IPv6-前缀长度"><a href="#IPv6-前缀长度" class="headerlink" title="IPv6 前缀长度"></a>IPv6 前缀长度</h3><p>在 IPv4 中，/24 称为前缀。在 IPv6 中，它被称为前缀长度。IPv6 不使用点分十进制子网掩码记法(如255.255.255.0)。与IPv4一样，前缀长度以斜线记法表示，用于表示 IPv6 地址的网络部分。<br>强烈建议对大多数网络使用 64 位接口 ID。这是因为无状态地址自动配置(SLAAC)使用64位作为接口ID。它还使子网划分更易于创建和管理。</p>
<h3 id="IPv6-单播地址"><a href="#IPv6-单播地址" class="headerlink" title="IPv6 单播地址"></a>IPv6 单播地址</h3><p><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645606597498.png"><br>IPv6地址通常有两个单播地址:</p>
<ul>
<li>  <strong>全局单播地址(GUA)</strong> - 这类似于公有 IPv4 地址。这些地址具有全局唯一性，是互联网可路由的地址。GUA可静态配置或动态分配</li>
<li>  <strong>链路本地地址 (LLA)</strong> -这对于每个支持ipv6的设备都是必需的。LLA用于与同一链路中的其他设备通信。在 IPv6 中，术语“链路”是指子网。LLA仅限于单个链路。它们的唯一性仅在该链路上得到保证，因为它们在该链路之外不具有可路由性。换句话说，路由器不会转发具有本地链路源地址或目的地址的数据包。</li>
</ul>
<h3 id="唯一本地地址"><a href="#唯一本地地址" class="headerlink" title="唯一本地地址"></a>唯一本地地址</h3><p>（范围 fc00:: /7 到 fdff:: /7）<br>IPv6 唯一本地地址与 IPv4 的 RFC 1918 私有地址具有相似之处，但是也有着重大差异。</p>
<ul>
<li>唯一本地地址用于一个站点内或数量有限的站点之间的本地编址。</li>
<li>唯一本地地址可用于从来不需要访问其他网络的设备。</li>
<li>唯一本地地址不会全局路由或转换为全局 IPv6 地址。</li>
</ul>
<h3 id="IPv6-全局单播地址-GUA"><a href="#IPv6-全局单播地址-GUA" class="headerlink" title="IPv6 全局单播地址 (GUA)"></a>IPv6 全局单播地址 (GUA)</h3><p>IPv6 全局单播地址 (GUA) 具有全局唯一性，可在 IPv6互联网上路由。这些地址相当于公有 IPv4 地址。互联网名称与数字地址分配机构 (ICANN)，即 IANA 的运营商，将 IPv6 地址块分配给五家 RIR。目前分配的仅是前三位为 001 或 2000::/3 的全局单播地址（GUA）<br><strong>注意</strong>: 2001:db8::/32已经留作备档之用，包括示例用途。<br>下图显示了 GUA 的结构和范围。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645609454686.png"><br>带有 /48 全局路由前缀和 /64 前缀的 IPv6 地址</p>
<p><strong>GUA 有三个部分：</strong></p>
<h4 id="全局路由前缀"><a href="#全局路由前缀" class="headerlink" title="全局路由前缀"></a>全局路由前缀</h4><p>全局路由前缀为提供商（如 ISP）分配给客户或站点的地址的前缀或网络部分。例如，ISP 通常会为其客户分配 /48 全局路由前缀。<br>例如，IPv6 地址2001:db8:acad::/48 的全局路由前缀，该前缀表示ISP知道该前缀（网络）的方式是前48位（3个十六进制数）（2001:db8:acad）。/48 前缀长度后面的双冒号 (::) 表示地址的剩余部分全部为 0。全局路由前缀的大小决定子网 ID 的大小。</p>
<h4 id="子网-ID"><a href="#子网-ID" class="headerlink" title="子网 ID"></a>子网 ID</h4><p>子网ID字段是全局路由前缀和接口ID之间的区域。与IPv4不同，在IPv4中您必须从主机部分借用位来创建子网，IPv6在设计时考虑到了子网。组织使用子网 ID 确定其站点的子网。子网 ID 越大，可用子网越多。<br>使用典型的/64前缀长度，前四个十六进制数是地址的网络部分，其中第四个十六进制数表示子网 ID。剩下的四个十六进制数用于接口 ID。</p>
<h4 id="接口-ID"><a href="#接口-ID" class="headerlink" title="接口 ID"></a>接口 ID</h4><p>IPv6 接口 ID 相当于 IPv4 地址的主机部分。使用术语“接口 ID”是因为单个主机可能有多个接口，而每个接口又有一个或多个 IPv6 地址。<br>/64 子网或前缀（全局路由前缀 + 子网 ID）为接口 ID 留下 64 位。建议允许启用 SLAAC 的设备创建自己的 64 位接口 ID。它还使得 IPv6 编址计划的开发变得简单而有效。</p>
<h3 id="IPv6-链路本地地址-LLA"><a href="#IPv6-链路本地地址-LLA" class="headerlink" title="IPv6 链路本地地址 (LLA)"></a>IPv6 链路本地地址 (LLA)</h3><p>IPv6 链路本地地址(LLA)允许设备与同一链路上支持 IPv6 的其他设备通信，并且只能在该链路（子网）上通信。具有源或目的LLA的数据包不能在数据包的源链路之外进行路由。<br><strong>GUA 不是一项要求。但是，每个启用 IPv6 的网络接口都必须有 LLA。</strong><br>如果没有手动为接口配置LLA，设备会在不与 DHCP 服务器通信的情况下自动创建自己的地址。支持 IPv6 的主机会创建 IPv6 LLA，即使没有为该设备分配 IPv6 全局单播地址。这允许支持 IPv6 的设备与同一子网中的其他支持 IPv6 的设备通信。这包括与默认网关（路由器）的通信。<br>IPv6 LLAs在fe80::/10范围内。/10 表示前 10 位是 1111 1110 10xx xxxx。第一个十六进制数的范围是 1111 1110 10<strong>00 0000</strong> (fe80) 到 1111 1110 10<strong>11 1111</strong> (febf)。<br>设备可以通过两种方式获取 LLA：</p>
<ul>
<li>  <strong>静态</strong> -这意味着设备已手动配置。</li>
<li>  <strong>动态</strong> -这意味着设备通过使用随机生成的值或使用扩展唯一标识符 (EUI) 方法创建自己的接口 ID，该方法使用客户端 MAC 地址和其他位。</li>
</ul>
<p><strong>注意</strong>: 通常情况下，用作链路上其他设备的默认网关的是路由器的LLA而不是GUA。</p>
<h2 id="GUA-和-LLA-静态配置"><a href="#GUA-和-LLA-静态配置" class="headerlink" title="GUA 和 LLA 静态配置"></a>GUA 和 LLA 静态配置</h2><p>在 思科IOS 中，大多数 IPv6 的配置和验证命令与 IPv4 的相似。在多数情况下，唯一区别是命令中使用“ipv6”取代“ip”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用以下地址在千兆以太网 0/0/0 接口上配置并激活 IPv6：</span><br><span class="line">R1(config)#interface g0/0/0</span><br><span class="line">将 g0/0/0 作为接口名称</span><br><span class="line">R1(config-if)#ipv6 address fe80::1:1 link-local</span><br><span class="line">设置LLA为fe80::1:1注意加“link-local”</span><br><span class="line">R1(config-if)#ipv6 address 2001:db8:acad:1::1/64</span><br><span class="line">设置GUA为2001:db8:acad:1::1/64</span><br><span class="line">R1(config-if)#no shutdown</span><br><span class="line">激活接口</span><br><span class="line">%LINK-3-UPDOWN: Interface GigabitEthernet0/0/0, changed state to up</span><br><span class="line">显示已开启</span><br><span class="line">R1(config-if)#exit</span><br><span class="line">退出接口配置模式</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用以下地址在串行 0/1/0 接口上配置并激活 IPv6：</span><br><span class="line">R1(config)#interface s0/1/0</span><br><span class="line">将 s0/1/0 作为接口名称</span><br><span class="line">R1(config-if)#ipv6 address fe80::3:1 link-local</span><br><span class="line">设置LLA为fe80::3:1注意加“link-local”</span><br><span class="line">R1(config-if)#ipv6 address 2001:db8:acad:3::1/64</span><br><span class="line">设置GUA为2001:db8:acad:3::1/64</span><br><span class="line">R1(config-if)#no shutdown</span><br><span class="line">激活接口</span><br><span class="line">%LINK-3-UPDOWN: Interface Serial0/1/0, changed state to up</span><br><span class="line">显示已开启</span><br><span class="line">R1(config-if)#exit</span><br><span class="line">退出接口配置模式</span><br></pre></td></tr></table></figure>

<h2 id="GUA动态编址"><a href="#GUA动态编址" class="headerlink" title="GUA动态编址"></a>GUA动态编址</h2><h3 id="RS-and-RA-消息"><a href="#RS-and-RA-消息" class="headerlink" title="RS and RA 消息"></a>RS and RA 消息</h3><p>大多数设备会动态获取其 IPv6 GUA。<br>对于 GUA，设备通过 Internet 控制消息协议版本 6 (ICMPv6) 消息动态获取地址。IPv6 路由器每 200 秒定期将 ICMPv6 RA 消息发送到网络上所有支持 IPv6 的设备。在响应发送 ICMPv6 路由器请求 (RS) 消息的主机时，也会发送 RA 消息，RS消息是对RA消息的请求。</p>
<p>为路由器启用 IPv6 路由，这在默认情况下是不启用的。若要将路由器启用为 IPv6 路由器，必须使用 <code>ipv6 unicast-routing</code> 全局配置命令。<br>ICMPv6 RA 消息提示设备获取 IPv6 GUA的方式。最终决定取决于设备的操作系统。ICMPv6 RA 消息包括以下：</p>
<ul>
<li>  <strong>网络前缀和前缀长度</strong> – 这会告知设备其所属的网络。</li>
<li>  <strong>默认网关</strong> – IPv6 LLA，RA 消息的源 IPv6 地址。</li>
<li>  <strong>DNS 地址和域名</strong> – 这些是DNS 服务器的地址和域名。<br>RA 消息有三种方法：</li>
</ul>
<h4 id="方法-1：SLAAC-Stateless-address-auto-configuration，无状态地址自动配置"><a href="#方法-1：SLAAC-Stateless-address-auto-configuration，无状态地址自动配置" class="headerlink" title="方法 1：SLAAC(Stateless address auto-configuration，无状态地址自动配置)"></a>方法 1：SLAAC(Stateless address auto-configuration，无状态地址自动配置)</h4><p>SLAAC是一种允许设备在没有DHCPv6服务的情况下创建自己的GUA的方法。使用 SLAAC，设备根据本地路由器的 ICMPv6 路由器通告 (RA) 消息获取必要信息。<br>默认情况下，RA 消息会提示接收设备使用 RA 消息中的信息创建其自己的 IPv6 GUA及其他必要信息。DHCPv6 服务器的服务不是必需项。<br>SLAAC 是无状态的，也就是说没有中央服务器（例如有状态DHCPv6 服务器）来分配GUA和维持设备及其地址的清单。借助 SLAAC，客户端设备使用 RA 消息中的信息创建其自己的GUA。<br>地址的两部分生成如下：</p>
<ul>
<li>  <strong>前缀</strong> -这是在 RA 消息中通告的。</li>
<li>  <strong>接口 ID</strong> -使用 EUI-64 流程或通过生成一个随机 64 位数字产生，取决于设备的操作系统。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645702011889.png" alt="enter description here"></li>
</ul>
<h4 id="方法-2：SLAAC-和无状态-DHCPv6-Dynamic-Host-Configuration-Protocol动态主机配置协议"><a href="#方法-2：SLAAC-和无状态-DHCPv6-Dynamic-Host-Configuration-Protocol动态主机配置协议" class="headerlink" title="方法 2：SLAAC 和无状态 DHCPv6(Dynamic Host Configuration Protocol动态主机配置协议)"></a>方法 2：SLAAC 和无状态 DHCPv6(Dynamic Host Configuration Protocol动态主机配置协议)</h4><p>路由器的接口可配置为使用 SLAAC 和无状态 DHCPv6 或仅使用有状态 DHCPv6 发送路由器通告。<br>如图所示，使用此方法，RA 消息建议设备使用以下内容：</p>
<ul>
<li>  SLAAC创建自己的IPv6 GUA</li>
<li>  路由器LLA，是RA源IPv6地址，作为默认网关地址</li>
<li>  使用无状态 DHCPv6 服务器获取其他信息，例如 DNS 服务器地址和域名。</li>
<li><em>注意</em>*: 使用无状态 DHCPv6 服务器分配 DNS 服务器地址和域名。它不分配 GUA。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645702026814.png" alt="enter description here"></li>
</ul>
<h4 id="方法-3：有状态的DHCPv6"><a href="#方法-3：有状态的DHCPv6" class="headerlink" title="方法 3：有状态的DHCPv6"></a>方法 3：有状态的DHCPv6</h4><p>路由器接口可以配置为仅使用有状态的DHCPv6发送RA。<br>有状态 DHCPv6 与 IPv4 的 DHCP 相似。设备可以从有状态 DHCPv6 服务器自动接收编址信息，包括GUA、前缀长度和 DNS 服务器地址。<br>如图所示，使用此方法，RA 消息建议设备使用以下内容：</p>
<ul>
<li>  路由器LLA，是RA源IPv6地址，作为默认网关地址。</li>
<li>  使用有状态 DHCPv6 服务器获取GUA、DNS 服务器地址、域名和其他必要信息。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645702073373.png" alt="enter description here"><br>使用有状态 DHCPv6 服务器分配并维持哪台设备接收哪个 IPv6 地址的清单。IPv4 的 DHCP 是有状态的。</li>
<li><em>注意:</em>* 默认网关地址仅可从 RA 消息中动态获取。无状态或有状态 DHCPv6 服务器均不提供默认网关地址。</li>
</ul>
<h3 id="EUI-64-流程和随机生成"><a href="#EUI-64-流程和随机生成" class="headerlink" title="EUI-64 流程和随机生成"></a>EUI-64 流程和随机生成</h3><p>当 RA 消息为 SLAAC 或 SLAAC 和无状态 DHCPv6 时，客户端必须生成自己的接口 ID。客户端从 RA 消息中获知地址的前缀部分，但必须创建自己的接口 ID。如图所示，接口 ID 可使用 EUI-64 流程或随机生成的 64 位数字创建。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645702541865.png"><br>IEEE 定义了扩展唯一标识符 (Extended Unique Identifier) 或修改的 EUI-64 流程。该流程使用客户端的 48 位以太网 MAC 地址，并在该 48 位 MAC 地址的中间插入另外 16 位来创建 64 位接口 ID。<br>以太网 MAC 地址一般使用十六进制表示，由两部分组成：</p>
<ul>
<li>  **组织唯一标识符 (OUI) **- OUI 为 IEEE 分配的 24 位（6 个十六进制数字）厂商代码。</li>
<li>  <strong>设备标识符</strong> - 设备标识符是通用 OUI 内的唯一 24 位（6 个十六进制数字）值。<br>EUI-64 接口 ID 以二进制表示，共分三个部分：</li>
<li>  客户端 MAC 地址的 24 位 OUI，但是第 7 位（通用/本地 (U/L) 位）颠倒。这意味着，如果第 7 位是 0，则它会变为 1，反之亦然。U/L 位的用途和该位值的翻转原因会在 RFC 5342 中讨论。</li>
<li>  插入的 16 位值 fffe（十六进制）。</li>
<li>  客户端 MAC 地址的 24 位设备标识符。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645703120047.png"><br>EUI-64 优势在于可以使用以太网 MAC 地址确定接口 ID。这也允许网络管理员使用唯一 MAC 地址轻松跟踪终端设备的 IPv6 地址。</li>
</ul>
<p>然而，这引起了许多用户的隐私担忧，他们担心自己的数据包可能会被追踪到实际的物理计算机。出于这些顾虑，可以转而使用<strong>随机生成</strong>的接口 ID。<br>根据操作系统，设备可以使用随机生成的接口 ID，而不使用 MAC 地址和 EUI-64 流程。从 Windows Vista 开始，Windows 使用随机生成的接口 ID，而不是 EUI-64 创建的接口 ID。Windows XP 和之前的 Windows 操作系统均使用 EUI-64。<br><strong>注意</strong>:为确保任何 IPv6 单播地址的唯一性，客户端可以使用重复地址检测 (DAD) 流程。这与 ARP 请求其地址的流程相似。如该请求没有响应，则地址是唯一的。</p>
<h2 id="LLA动态编址"><a href="#LLA动态编址" class="headerlink" title="LLA动态编址"></a>LLA动态编址</h2><p>所有 IPv6 设备都必须有 IPv6 LLA。与 IPv6 GUA一样，您也可以动态创建 LLA。无论您如何创建LLA(和GUA)，重要的是要验证所有IPv6地址配置。<br>使用fe80::/10 前缀和通过 EUI-64 流程或随机生成的 64 位数字创建的接口 ID 动态创建LLA。</p>
<h3 id="Windows上的动态LLA"><a href="#Windows上的动态LLA" class="headerlink" title="Windows上的动态LLA"></a>Windows上的动态LLA</h3><p>操作系统，如Windows，通常会对SLAAC创建的GUA和动态分配的LLA使用相同的方法（EUI-64 生成、随机生成）</p>
<h3 id="思科路由器上的动态LLA"><a href="#思科路由器上的动态LLA" class="headerlink" title="思科路由器上的动态LLA"></a>思科路由器上的动态LLA</h3><p>当为接口分配GUA时，思科路由器会自动创建 IPv6 LLA。默认情况下，思科 IOS 路由器使用 EUI-64 为 IPv6 接口上的所有LLA生成接口 ID。对于串行接口，路由器会使用以太网接口的 MAC 地址。回想一下，LLA在该链路或网络上必须具有唯一性。但是，使用动态分配的LLA的缺点在于其接口 ID 较长，因此很难识别并记住分配的地址。示例显示了路由器 R1 千兆以太网0/0/0 接口的 MAC 地址。该地址用于在同一接口上动态创建LLA，也用于串行0/1/0接口。<br>为了更容易在路由器上识别和记忆这些地址，通常要在路由器上静态配置 IPv6 LLA。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645704177487.png"></p>
<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p><strong>show ipv6 interface brief</strong> 命令会显示以太网接口的 MAC 地址。EUI-64 使用此 MAC 地址生成LLA的接口 ID。此外，<strong>show ipv6 interface brief</strong> 命令用于显示各个接口的缩略输出。与接口位于同一行的 [up/up] 输出指示第 1 层/第 2 层接口状态。这与等效的 IPv4 命令的状态和协议列相同。<br><strong>show ipv6 route</strong> 命令可用于检验 IPv6 网络和特定 IPv6 接口地址已添加到 IPv6 路由表中。该 <strong>show ipv6 route</strong> 命令将仅显示 IPv6 网络，而不显示 IPv4 网络。<br>IPv6 的 <strong>ping</strong> 命令和 IPv4 中这条命令的用法相同，只不过后接使用的是 IPv6 地址。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">输入显示 IPv6 接口状态摘要的 show 命令。</span><br><span class="line">R1#show ipv6 interface brief</span><br><span class="line">GigabitEthernet0/0/0   [up/up]</span><br><span class="line">    FE80::1:1</span><br><span class="line">    2001:DB8:ACAD:1::1</span><br><span class="line">GigabitEthernet0/0/1   [up/up]</span><br><span class="line">    FE80::2:1</span><br><span class="line">    2001:DB8:ACAD:2::1</span><br><span class="line">Serial0/1/0            [up/up]</span><br><span class="line">    FE80::3:1</span><br><span class="line">    2001:DB8:ACAD:3::1</span><br><span class="line">Serial0/1/1            [down/down]</span><br><span class="line">    unassigned</span><br><span class="line">GigabitEthernet0       [administratively down/down]</span><br><span class="line">    unassigned</span><br><span class="line">验证从R1到PC2在2001:db8:acad:1::10的连接性。</span><br><span class="line">R1#show ipv6 route</span><br><span class="line">IPv6 Routing Table - default - 7 entries</span><br><span class="line">Codes: C - Connected, L - Local, S - Static, U - Per-user Static route</span><br><span class="line">       B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP</span><br><span class="line">       H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea</span><br><span class="line">       IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO</span><br><span class="line">       ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect</span><br><span class="line">       O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2</span><br><span class="line">       ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2, la - LISP alt</span><br><span class="line">       lr - LISP site-registrations, ld - LISP dyn-eid, a - Application</span><br><span class="line">C   2001:DB8:ACAD:1::/64 [0/0]</span><br><span class="line">     via GigabitEthernet0/0, directly connected</span><br><span class="line">L   2001:DB8:ACAD:1::1/128 [0/0]</span><br><span class="line">     via GigabitEthernet0/0, receive</span><br><span class="line">C   2001:DB8:ACAD:2::/64 [0/0]</span><br><span class="line">     via GigabitEthernet0/1, directly connected</span><br><span class="line">L   2001:DB8:ACAD:2::1/128 [0/0]</span><br><span class="line">     via GigabitEthernet0/1, receive</span><br><span class="line">C   2001:DB8:ACAD:3::/64 [0/0]</span><br><span class="line">     via Serial0/0/1, directly connected</span><br><span class="line">L   2001:DB8:ACAD:3::1/128 [0/0]</span><br><span class="line">     via Serial0/0/1, receive</span><br><span class="line">L   FF00::/8 [0/0]</span><br><span class="line">     via Null0, receive</span><br><span class="line"></span><br><span class="line">R1#ping 2001:db8:acad:1::10</span><br><span class="line">Type escape sequence to abort.</span><br><span class="line">Sending 5, 100-byte ICMP Echos to 2001:DB8:ACAD:1::10, timeout is 2 seconds:</span><br><span class="line">!!!!!</span><br><span class="line">Success rate is 100 percent (5/5), round-trip min/avg/max = 1/1/1 ms</span><br><span class="line">您已成功验证 IPv6 地址配置。</span><br></pre></td></tr></table></figure>

<h2 id="IPv6-组播地址"><a href="#IPv6-组播地址" class="headerlink" title="IPv6 组播地址"></a>IPv6 组播地址</h2><p>IPv6 组播地址类似于 IPv4 组播地址。回想一下，组播地址用于发送单个数据包到一个或多个目标（组播组）。IPv6 组播地址的前缀为ff00::/8。<br>IPv6 组播地址分为两种类型：</p>
<ul>
<li>  知名组播地址</li>
<li>  请求节点组播地址</li>
</ul>
<h3 id="知名组播地址"><a href="#知名组播地址" class="headerlink" title="知名组播地址"></a>知名组播地址</h3><p>已分配的知名IPv6 组播地址。分配的组播地址是为预先定义的设备组保留的组播地址。<br>这些是两种常见的 IPv6 分配组播组：</p>
<ul>
<li>  <strong>ff02::1全节点组播组</strong> -这是一个包含<strong>所有支持 IPv6 的设备的组播组</strong>。发送到该组的数据包由该链路或网络上的所有 IPv6 接口接收和处理。这与 IPv4 中的广播地址具有相同的效果。</li>
<li>  <strong>ff02::2:全路由器组播组</strong> - 这是<strong>所有IPv6路由器加入的组播组</strong>。当在IPv6路由器全局模式下启用ipv6 unicast-routing命令后，该路由器即成为该组的成员。发送到该组的数据包由该链路或网络上的所有 IPv6 路由器接收和处理。</li>
</ul>
<h3 id="请求节点组播地址"><a href="#请求节点组播地址" class="headerlink" title="请求节点组播地址"></a>请求节点组播地址</h3><p>请求节点组播地址类似于全节点组播地址(ff02)。请求节点组播地址的优势在于它被映射到特殊的以太网组播地址。这使得以太网网卡可以通过检查目的 MAC 地址过滤该帧，而不是将它发送给 IPv6 流程来判断该设备是否是 IPv6 数据包的既定目标。</p>
<h2 id="IPv6-网络的子网划分"><a href="#IPv6-网络的子网划分" class="headerlink" title="IPv6 网络的子网划分"></a>IPv6 网络的子网划分</h2><p>使用IPv4时，我们必须从主机部分借用位来创建子网。这是因为对IPv4来说，子网划分是事后才想到的。但是，IPv6 的设计考虑到了子网划分。IPv6 GUA中的一个单独的子网ID字段用于创建子网。如图所示，子网ID字段是全局路由前缀和接口ID之间的区域。<br><img src="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN11-13/1645704992473.png"><br>128 位地址的好处在是，它可以为每个网络支持足够多的子网并为每个子网支持足够多的主机。地址保留不是问题。</p>
<ul>
<li>  <strong>16 位子网 ID</strong> -创建多达 65,536 个子网</li>
<li>  <strong>64 位接口 ID</strong> -每个子网支持多达 1800亿亿个主机 IPv6 地址（即 18,000,000,000,000,000,000）</li>
</ul>
<h3 id="配置命令"><a href="#配置命令" class="headerlink" title="配置命令"></a>配置命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">R1(config)# interface gigabitethernet 0/0/0</span><br><span class="line">R1(config-if)# ipv6 address 2001:db8:acad:1::1/64</span><br><span class="line">R1(config-if)# no shutdown</span><br><span class="line">R1(config-if)# exit</span><br><span class="line">R1(config)# interface gigabitethernet 0/0/1</span><br><span class="line">R1(config-if)# ipv6 address 2001:db8:acad:2::1/64</span><br><span class="line">R1(config-if)# no shutdown</span><br><span class="line">R1(config-if)# exit</span><br><span class="line">R1(config)# interface serial 0/1/0</span><br><span class="line">R1(config-if)# ipv6 address 2001:db8:acad:3::1/64</span><br><span class="line">R1(config-if)# no shutdown</span><br></pre></td></tr></table></figure>

<p>命令<strong>ping ::1</strong>用于测试IPv6主机的内部配置<br><strong>::1</strong> 是一个环回地址。成功地ping到这个地址意味着正确地安装了TCP/IP堆栈。</p>
<h1 id="ICMP"><a href="#ICMP" class="headerlink" title="ICMP"></a>ICMP</h1><h2 id="ICMP-消息"><a href="#ICMP-消息" class="headerlink" title="ICMP 消息"></a>ICMP 消息</h2><p>虽然 IP 只是“尽最大努力”的协议，但在与另一个IP设备通信时，TCP/IP套件确实提供了错误消息和参考消息。这些消息使用 ICMP 服务发送。其用途是就特定情况下处理 IP 数据包的相关问题提供反馈，而并非是使 IP 可靠。ICMP 消息并非必需的，而且在网络内通常出于安全原因而被禁止。<br>ICMP 可同时用于 IPv4 和 IPv6。ICMPv4 是 IPv4 的消息协议。ICMPv6 为 IPv6 提供相同的服务，此外，还包括其他功能。在本课程中，涉及 ICMPv4 和 ICMPv6 时均会使用术语 ICMP。<br>ICMP 消息的类型及其发送原因非常多。ICMPv4 和 ICMPv6 <strong>通用的</strong> ICMP 消息包括：</p>
<h3 id="主机联通性"><a href="#主机联通性" class="headerlink" title="主机联通性"></a>主机联通性</h3><p>ICMP Echo消息可用于测试 IP 网络上主机的可达性。</p>
<h3 id="目的地或服务不可达"><a href="#目的地或服务不可达" class="headerlink" title="目的地或服务不可达"></a>目的地或服务不可达</h3><p>当主机或网关收到无法传送的数据包时，它会使用 ICMP 目的地不可达消息通知源主机，目的地或服务无法到达。消息包括指示数据包为何无法传送的代码。<br>ICMPv4 的目的地不可达代码示例有：</p>
<ul>
<li>  0 - 网络不可达。</li>
<li>  1 - 主机不可达。</li>
<li>  2 - 协议不可达。</li>
<li>  3 - 端口不可达。</li>
</ul>
<p>ICMPv6 的目的地不可达代码示例有：</p>
<ul>
<li>  0-没有通往目标的路由。</li>
<li>  1-管理上禁止与目的地通信（例如防火墙）</li>
<li>  2-超出源地址的范围</li>
<li>  3-地址无法访问</li>
<li>  4-端口不可达。</li>
<li><em>注意</em>*: ICMPv6 的目的地不可达消息代码与此类似，但稍有不同。</li>
</ul>
<h3 id="超时"><a href="#超时" class="headerlink" title="超时"></a>超时</h3><p>路由器使用 ICMPv4 超时消息表明，因为数据包的生存时间 (TTL) 字段递减到 0 而不能转发该数据包。如果路由器接收数据包并且将 IPv4 数据包的 TTL 字段的值递减为零，则它会丢弃数据包并向源主机发送超时消息。<br>如果路由器因数据包过期而无法转发 IPv6 数据包，ICMPv6 也会发送超时消息。ICMPv6使用IPv6<strong>跳数限制</strong>字段来确定数据包是否已过期，而不是IPv4 TTL字段。</p>
<h3 id="ICMPv6-特有-消息"><a href="#ICMPv6-特有-消息" class="headerlink" title="ICMPv6 (特有)消息"></a>ICMPv6 (特有)消息</h3><p>在 ICMPv6 中发现的信息和错误消息非常类似于 ICMPv4 的控制和错误消息。但是，ICMPv6 拥有 ICMPv4 中所没有的新特性和功能提升。ICMPv6 消息封装在 IPv6 中。<br>ICMPv6 在邻居发现协议（ND 或 NDP）中包括四个新协议。<br>IPv6 路由器和 IPv6 设备之间的消息传递，包括动态地址分配如下所示：</p>
<ul>
<li>  <strong>路由器请求 (RS) 消息</strong>-RS消息是对RA消息的请求。一个IPv6主机启动后将发送一个RS。</li>
<li>  <strong>路由器通告 (RA) 消息</strong>-启用IPv6的路由器每200秒发送RA消息，向启用IPv6的主机提供编址信息。RA 消息中可以包含主机的编址信息，例如前缀、前缀长度、DNS 地址和域名。使用 SLAAC 的主机会将其默认网关设置为发送 RA 的路由器的本地链路地址。<br>IPv6 设备之间的消息传递，包括重复的地址检测和地址解析如下所示：</li>
<li>  <strong>邻居请求 (NS) 消息</strong>-当设备分配有全局IPv6单播或本地链路单播地址时，则建议对地址执行 重复检测（DAD） 来确保IPv6地址的唯一性。如果网络中的其他设备具有该地址，则会使用 NA 消息进行响应。此 NA 消息通知发送方设备地址已在使用。如果回应的 NA 消息未在固定的一段时间返回，则单播地址是唯一的，可以使用。</li>
<li>  <strong>邻居通告 (NA) 消息</strong>-当 LAN 上的设备知道目的 IPv6 单播地址，但不知道其以太网 MAC 地址时，会使用地址解析。要确定目的 MAC 地址，设备会将 NS 消息发送到请求节点地址。该消息包括已知（目标）IPv6 地址。具有目标 IPv6 地址的设备会使用包含其以太网 MAC 地址的 NA 消息进行回应。</li>
<li><em>注意</em>*: ICMPv6 ND 还包括重定向消息，与 ICMPv4 中使用的重定向消息功能相似。</li>
</ul>
<h2 id="Ping-和-Traceroute-测试"><a href="#Ping-和-Traceroute-测试" class="headerlink" title="Ping 和 Traceroute 测试"></a>Ping 和 Traceroute 测试</h2><h3 id="Ping"><a href="#Ping" class="headerlink" title="Ping"></a>Ping</h3><p>Ping 是一种测试程序，它使用 ICMP Echo请求和Echo应答消息来测试主机之间的连接。<br>为了测试与网络上的另一台主机的连接，可使用 ping 命令将回应请求发送给该主机地址。若指定地址处的主机收到回应请求，便会使用Echo应答进行响应。每收到一个Echo应答，ping都会提供发出请求与收到应答的时间反馈。这可以作为网络性能的度量。<br>Ping 对响应规定了超时值。如果在超时前没有收到应答，ping 会提供一条消息，表示未收到响应。这可能表示存在问题，但是，还可能表示在网络上启用了阻止 ping 消息的安全功能。如果在发送ICMP Echo请求之前需要执行地址解析(ARP或ND)，那么第一次ping通常会超时。<br>所有请求发送完毕后，ping实用程序会提供摘要，包括成功率和到达目的地的平均往返时间。</p>
<p>在路由器上输入 <strong>ping</strong> 命令时，最常见的指示符如下所示：</p>
<ul>
<li>  <strong>!</strong> - 表示收到一个 ICMP Echo 应答消息</li>
<li>  <strong>.</strong> - 表示超时，正在等待 ICMP Echo应答消息</li>
<li>  <strong>U</strong> - 表示收到了一个 ICMP 无法到达的消息</li>
</ul>
<p>使用<strong>ping</strong>进行的连通性测试的类型包括:</p>
<ul>
<li>  <strong>Ping 本地环回</strong>-从 127.0.0.1 接收的 IPv4 响应或从 ::1 接收的 IPv6 响应，表示主机上的 IP 安装正确。此响应来自网络层。但是，此响应并不代表地址、掩码或网关配置正确。它也不能说明有关网络协议栈下层的任何状态。它只测试 IP 网络层的 IP 连接。如果收到错误消息，则表示该主机上的 TCP/IP 无法正常运行。</li>
<li>  <strong>向默认网关发出 ping 命令</strong>-成功 ping通网关表示主机和充当网关的路由器接口在本地网络中均运行正常。</li>
<li>  <strong>Ping 远程主机</strong>-如果 ping 成功，则说明网际网络大部分运行正常。在互联网络上成功 ping通即确认本地网络上的通信正常，充当网关的路由器运行正常，且可能位于本地网络和远程主机网络之间路径上的所有其他路由器运行正常。</li>
</ul>
<h3 id="Traceroute"><a href="#Traceroute" class="headerlink" title="Traceroute"></a>Traceroute</h3><p>Ping 用于测试两台主机之间的连接，但是不提供关于主机之间设备的详细信息。Traceroute <strong>tracert</strong>实用程序可以生成通信路径上成功到达的设备列表。此列表可以提供重要的验证和故障排除信息。如果数据到达目的地，则 Trace 就会列出主机之间的路径中每台路由器上的接口。如果数据在沿途的某一跳上失败，则回应 Trace 的最后一个路由器的地址可以提供指示，说明发现问题或有安全限制的地方。<br><strong>往返时间</strong><br>Traceroute 可提供沿路径每一跳的往返时间并指示是否有某一跳未响应。往返时间是数据包到达远程主机以及从该主机返回响应所花费的时间。星号 * 用于表示丢失的或无应答的数据包。<br>此信息可用于在路径中定位有问题的路由器，或表示路由器配置为不应答。如果显示器显示特定的某一跳响应时间长或数据丢失，这表示该路由器的资源或其连接可能压力过大。<br><strong>IPv4 TTL 和 IPv6 跳数限制</strong><br>Traceroute 使用第 3 层报头中的 IPv4 TTL 字段功能和 IPv6 跳数限制字段功能以及 ICMP 超时消息。</p>

    </div>

    
    
    

 
   <div>
     <div>
    
        <div style="text-align:center;color: #CDBE70;font-size:24px;">---------------THE<i class="fa fa-exclamation-triangle"></i>END---------------</div>
    
</div>
   </div>
 

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag"># 网络</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/02/28/%E7%BD%91%E7%BB%9C/ITN8-10/" rel="prev" title="ITN 8-10">
      <i class="fa fa-chevron-left"></i> ITN 8-10
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/02/28/%E5%A4%A7%E4%BA%8C%E4%B8%8A%E8%AF%BE/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="next" title="计算机操作系统">
      计算机操作系统 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#IPv4%E7%BC%96%E5%9D%80"><span class="nav-number">1.</span> <span class="nav-text">IPv4编址</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%B0%E5%9D%80%E7%BB%93%E6%9E%84"><span class="nav-number">1.1.</span> <span class="nav-text">地址结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv4-%E5%8D%95%E6%92%AD%E3%80%81%E5%B9%BF%E6%92%AD%E5%92%8C%E7%BB%84%E6%92%AD"><span class="nav-number">1.2.</span> <span class="nav-text">IPv4 单播、广播和组播</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E6%92%AD"><span class="nav-number">1.2.1.</span> <span class="nav-text">单播</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%BF%E6%92%AD"><span class="nav-number">1.2.2.</span> <span class="nav-text">广播</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E6%92%AD"><span class="nav-number">1.2.3.</span> <span class="nav-text">组播</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv4-%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">1.3.</span> <span class="nav-text">IPv4 地址的分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A7%81%E6%9C%89-IPv4-%E5%9C%B0%E5%9D%80%E5%92%8C%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-NAT"><span class="nav-number">1.4.</span> <span class="nav-text">私有 IPv4 地址和网络地址转换 (NAT)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%93%E7%94%A8-IPv4-%E5%9C%B0%E5%9D%80"><span class="nav-number">1.5.</span> <span class="nav-text">专用 IPv4 地址</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%9B%9E%E5%9C%B0%E5%9D%80"><span class="nav-number">1.5.1.</span> <span class="nav-text">环回地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E9%93%BE%E8%B7%AF%E5%9C%B0%E5%9D%80"><span class="nav-number">1.5.2.</span> <span class="nav-text">本地链路地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP-%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%86%E9%85%8D"><span class="nav-number">1.5.3.</span> <span class="nav-text">IP 地址的分配</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%88%86%E6%AE%B5"><span class="nav-number">1.6.</span> <span class="nav-text">网络分段</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%BF%E6%92%AD%E5%9F%9F%E5%92%8C%E5%88%86%E6%AE%B5"><span class="nav-number">1.6.1.</span> <span class="nav-text">广播域和分段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%A7%E5%9E%8B%E5%B9%BF%E6%92%AD%E5%9F%9F%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98%E4%B8%8E%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="nav-number">1.6.2.</span> <span class="nav-text">大型广播域存在的问题与子网划分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv4-%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AD%90%E7%BD%91"><span class="nav-number">1.6.3.</span> <span class="nav-text">IPv4 网络的子网</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VLSM-Variable-Length-Subnetwork-Mask-%E5%8F%AF%E5%8F%98%E9%95%BF%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="nav-number">1.7.</span> <span class="nav-text">VLSM(Variable Length Subnetwork Mask 可变长子网掩码)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E7%A4%BA"><span class="nav-number">1.8.</span> <span class="nav-text">提示</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IPv6%E7%BC%96%E5%9D%80"><span class="nav-number">2.</span> <span class="nav-text">IPv6编址</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6-%E5%9C%B0%E5%9D%80%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95"><span class="nav-number">2.1.</span> <span class="nav-text">IPv6 地址表示方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6-%E5%9C%B0%E5%9D%80%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.2.</span> <span class="nav-text">IPv6 地址类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6-%E5%9C%B0%E5%9D%80%E4%B8%89%E5%A4%A7%E7%B1%BB"><span class="nav-number">2.2.1.</span> <span class="nav-text">IPv6 地址三大类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6-%E5%89%8D%E7%BC%80%E9%95%BF%E5%BA%A6"><span class="nav-number">2.2.2.</span> <span class="nav-text">IPv6 前缀长度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6-%E5%8D%95%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="nav-number">2.2.3.</span> <span class="nav-text">IPv6 单播地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E6%9C%AC%E5%9C%B0%E5%9C%B0%E5%9D%80"><span class="nav-number">2.2.4.</span> <span class="nav-text">唯一本地地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6-%E5%85%A8%E5%B1%80%E5%8D%95%E6%92%AD%E5%9C%B0%E5%9D%80-GUA"><span class="nav-number">2.2.5.</span> <span class="nav-text">IPv6 全局单播地址 (GUA)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E8%B7%AF%E7%94%B1%E5%89%8D%E7%BC%80"><span class="nav-number">2.2.5.1.</span> <span class="nav-text">全局路由前缀</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E7%BD%91-ID"><span class="nav-number">2.2.5.2.</span> <span class="nav-text">子网 ID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3-ID"><span class="nav-number">2.2.5.3.</span> <span class="nav-text">接口 ID</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6-%E9%93%BE%E8%B7%AF%E6%9C%AC%E5%9C%B0%E5%9C%B0%E5%9D%80-LLA"><span class="nav-number">2.2.6.</span> <span class="nav-text">IPv6 链路本地地址 (LLA)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GUA-%E5%92%8C-LLA-%E9%9D%99%E6%80%81%E9%85%8D%E7%BD%AE"><span class="nav-number">2.3.</span> <span class="nav-text">GUA 和 LLA 静态配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GUA%E5%8A%A8%E6%80%81%E7%BC%96%E5%9D%80"><span class="nav-number">2.4.</span> <span class="nav-text">GUA动态编址</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RS-and-RA-%E6%B6%88%E6%81%AF"><span class="nav-number">2.4.1.</span> <span class="nav-text">RS and RA 消息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-1%EF%BC%9ASLAAC-Stateless-address-auto-configuration%EF%BC%8C%E6%97%A0%E7%8A%B6%E6%80%81%E5%9C%B0%E5%9D%80%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">2.4.1.1.</span> <span class="nav-text">方法 1：SLAAC(Stateless address auto-configuration，无状态地址自动配置)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-2%EF%BC%9ASLAAC-%E5%92%8C%E6%97%A0%E7%8A%B6%E6%80%81-DHCPv6-Dynamic-Host-Configuration-Protocol%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE"><span class="nav-number">2.4.1.2.</span> <span class="nav-text">方法 2：SLAAC 和无状态 DHCPv6(Dynamic Host Configuration Protocol动态主机配置协议)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-3%EF%BC%9A%E6%9C%89%E7%8A%B6%E6%80%81%E7%9A%84DHCPv6"><span class="nav-number">2.4.1.3.</span> <span class="nav-text">方法 3：有状态的DHCPv6</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EUI-64-%E6%B5%81%E7%A8%8B%E5%92%8C%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90"><span class="nav-number">2.4.2.</span> <span class="nav-text">EUI-64 流程和随机生成</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LLA%E5%8A%A8%E6%80%81%E7%BC%96%E5%9D%80"><span class="nav-number">2.5.</span> <span class="nav-text">LLA动态编址</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Windows%E4%B8%8A%E7%9A%84%E5%8A%A8%E6%80%81LLA"><span class="nav-number">2.5.1.</span> <span class="nav-text">Windows上的动态LLA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%9D%E7%A7%91%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%8A%A8%E6%80%81LLA"><span class="nav-number">2.5.2.</span> <span class="nav-text">思科路由器上的动态LLA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4"><span class="nav-number">2.5.3.</span> <span class="nav-text">命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6-%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="nav-number">2.6.</span> <span class="nav-text">IPv6 组播地址</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E5%90%8D%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="nav-number">2.6.1.</span> <span class="nav-text">知名组播地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E8%8A%82%E7%82%B9%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="nav-number">2.6.2.</span> <span class="nav-text">请求节点组播地址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6-%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="nav-number">2.7.</span> <span class="nav-text">IPv6 网络的子网划分</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4"><span class="nav-number">2.7.1.</span> <span class="nav-text">配置命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ICMP"><span class="nav-number">3.</span> <span class="nav-text">ICMP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ICMP-%E6%B6%88%E6%81%AF"><span class="nav-number">3.1.</span> <span class="nav-text">ICMP 消息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E6%9C%BA%E8%81%94%E9%80%9A%E6%80%A7"><span class="nav-number">3.1.1.</span> <span class="nav-text">主机联通性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E7%9A%84%E5%9C%B0%E6%88%96%E6%9C%8D%E5%8A%A1%E4%B8%8D%E5%8F%AF%E8%BE%BE"><span class="nav-number">3.1.2.</span> <span class="nav-text">目的地或服务不可达</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B6%85%E6%97%B6"><span class="nav-number">3.1.3.</span> <span class="nav-text">超时</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ICMPv6-%E7%89%B9%E6%9C%89-%E6%B6%88%E6%81%AF"><span class="nav-number">3.1.4.</span> <span class="nav-text">ICMPv6 (特有)消息</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ping-%E5%92%8C-Traceroute-%E6%B5%8B%E8%AF%95"><span class="nav-number">3.2.</span> <span class="nav-text">Ping 和 Traceroute 测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Ping"><span class="nav-number">3.2.1.</span> <span class="nav-text">Ping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Traceroute"><span class="nav-number">3.2.2.</span> <span class="nav-text">Traceroute</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="dyinjin"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">dyinjin</p>
  <div class="site-description" itemprop="description">摸鱼窝</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">56</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fas fa-heartbeat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dyinjin</span>
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">本博客全站共140.7k字呐~</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,120,50' opacity='0.3' zIndex='-2' count='100' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
<div class="moon-menu">
  <div class="moon-menu-items">
    
    <div id="moon-menu-item-back2bottom" class="moon-menu-item">
      <i class='fas fa-chevron-down'></i>    </div>
    
    <div id="moon-menu-item-back2top" class="moon-menu-item">
      <i class='fas fa-chevron-up'></i>    </div>
    
  </div>
  <div class="moon-menu-button">
    <svg class="moon-menu-bg">
      <circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle>
      <circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle>
    </svg>
    <div class="moon-menu-content">
      <div class="moon-menu-icon"><i class='fas fa-ellipsis-v'></i></div>
      <div class="moon-menu-text"></div>
    </div>
  </div>
</div><script src="/js/injector.js"></script>
</body>
</html>
